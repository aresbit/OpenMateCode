# Recommended Project Structure for Modern C Projects

This document describes the recommended directory structure for C projects using the modern Makefile template.

## Standard Structure

```
project-name/
├── Makefile                    # Build configuration (based on template)
├── README.md                   # Project documentation
├── LICENSE                     # License file
├── .gitignore                  # Git ignore patterns
├── .clang-format              # Code formatting configuration
├── .clang-tidy                # Static analysis configuration
├── compile_commands.json      # Generated by bear for tooling (optional)
│
├── src/                       # Application source code
│   ├── main.c                 # Main entry point
│   ├── module1.c              # Feature modules
│   ├── module2.c
│   └── internal/              # Internal modules (not part of public API)
│       └── helper.c
│
├── include/                   # Public header files
│   ├── project-name.h         # Main public header
│   ├── module1.h
│   ├── module2.h
│   └── internal/              # Internal headers (not for external use)
│       └── helper.h
│
├── lib/                       # Third-party libraries
│   ├── README.md              # Documentation for included libraries
│   └── some-library/          # Git submodule or copied source
│       ├── include/
│       ├── src/
│       └── LICENSE
│
├── tests/                     # Test files
│   ├── test_main.c            # Test runner
│   ├── test_module1.c         # Module tests
│   ├── test_module2.c
│   └── fixtures/              # Test fixtures and data
│       └── sample_data.txt
│
├── examples/                  # Example programs (optional)
│   ├── basic-usage.c
│   └── advanced-features.c
│
├── docs/                      # Documentation (optional)
│   ├── API.md
│   ├── architecture.md
│   └── building.md
│
├── build/                     # Build artifacts (generated, not in version control)
│   ├── src/
│   │   ├── main.o
│   │   ├── module1.o
│   │   └── internal/
│   │       └── helper.o
│   └── lib/
│       └── some-library/
│           └── library.o
│
└── bin/                       # Executables (generated, not in version control)
    ├── project-name           # Main executable
    └── project-name_test      # Test executable
```

## Structure Variations

### Single-Header Library
```
single-header-lib/
├── Makefile
├── single_header.h           # Self-contained header
├── test.c                   # Tests and examples
├── examples/
│   └── demo.c
└── README.md
```

### Application with Resources
```
app-with-resources/
├── Makefile
├── src/
│   ├── main.c
│   ├── gui.c
│   └── resources.c
├── include/
│   └── app.h
├── resources/               # Non-code resources
│   ├── images/
│   ├── sounds/
│   └── config/
├── data/                    # Runtime data
│   └── default.cfg
└── scripts/                 # Build and deployment scripts
    └── package.sh
```

### Multi-Target Project
```
multi-target-project/
├── Makefile
├── common/                  # Shared code
│   ├── src/
│   └── include/
├── lib/                     # Library target
│   ├── src/
│   └── include/
├── cli/                     # Command-line interface
│   └── src/
├── gui/                     # Graphical interface
│   └── src/
└── tests/                   # Tests for all components
    ├── test_common.c
    ├── test_lib.c
    └── test_cli.c
```

## Git Configuration

### .gitignore Example
```
# Build artifacts
/build/
/bin/
*.o
*.a
*.so
*.dylib
*.dll
*.exe

# IDE files
.vscode/
.idea/
*.swp
*.swo

# OS files
.DS_Store
Thumbs.db

# Generated files
compile_commands.json
*.log
*.tmp

# Dependencies
deps/
vendor/
```

### Git Submodules for Libraries
```bash
# Add library as submodule
git submodule add https://github.com/example/library.git lib/library-name

# Initialize and update submodules
git submodule init
git submodule update

# Or clone with submodules
git clone --recurse-submodules https://github.com/your/project.git
```

## Makefile Configuration for Different Structures

### Nested Source Directories
```makefile
# Find all C files recursively
C_SOURCES := $(shell find $(SRC_DIR) -name "*.c")
CXX_SOURCES := $(shell find $(SRC_DIR) -name "*.cpp")

# Create object file paths that preserve directory structure
OBJECTS := $(patsubst %.c,$(BUILD_DIR)/%.o,$(C_SOURCES)) \
           $(patsubst %.cpp,$(BUILD_DIR)/%.o,$(CXX_SOURCES))

# Ensure build directory structure matches source
$(BUILD_DIR)/%.o: %.c
	@mkdir -p $(dir $@)
	$(CC) $(CPPFLAGS) $(CFLAGS) -c $< -o $@
```

### Multiple Include Directories
```makefile
# Include paths
INCLUDE_PATHS := -Iinclude -Ilib/some-library/include -I/usr/local/include

# Add to compiler flags
CPPFLAGS := $(INCLUDE_PATHS)
```

### Library Integration
```makefile
# Static library target
$(BIN_DIR)/lib$(NAME).a: $(OBJECTS)
	ar rcs $@ $^

# Shared library target
$(BIN_DIR)/lib$(NAME).so: $(OBJECTS)
	$(CC) -shared -o $@ $^ $(LDFLAGS)
```

## Best Practices for Project Organization

1. **Separate Public and Private Headers**
   - Public headers in `include/` for external users
   - Private headers in `src/` or `include/internal/` for internal use

2. **Modular Design**
   - One module per pair of .c/.h files
   - Clear API boundaries between modules
   - Minimal dependencies between modules

3. **Test Organization**
   - Mirror source structure in tests
   - One test file per module
   - Shared test utilities in `tests/`

4. **Build Output Separation**
   - Keep generated files out of source directories
   - Use `build/` for intermediate files
   - Use `bin/` for final executables

5. **Third-Party Code**
   - Keep in `lib/` directory
   - Use git submodules or package managers
   - Document license requirements

6. **Documentation**
   - Keep close to code it documents
   - Use Markdown for readability
   - Include examples and tutorials